{"version":3,"sources":["../../params.js","containers/socket.js","containers/context.js","components/Game/Tetris/useInterval.js","components/Game/Tetris/Matrix.js","components/Game/Tetris/movments.js","components/styles/StyledTetris.js","components/styles/StyledMenuButton.js","components/Menu/MenuButton.js","components/styles/StyledStartButton.js","components/Menu/StartButton.js","components/styles/StyledSoundButton.js","audio/tetris.mp3","components/Menu/SoundButton.js","components/styles/StyledLeaveButton.js","components/Menu/LeaveButton.js","components/Menu/Menu.js","components/Game/Tetris/Tetris.js","components/Game/Game.js","components/Home/Home.js","components/Room/Room.js","components/New_room/New_room.js","components/Join_room/Join_room.js","containers/App.js","index.js"],"names":["params","server","host","port","this","module","exports","socket","io","SocketContext","React","createContext","useInterval","callback","delay","savedCallback","useRef","useEffect","current","id","setInterval","clearInterval","rotate","vec","center","angle","normVec","x","y","Math","round","cos","sin","translateX","unit","translateY","tetriminos","points","map","value","Mat2","PI","Right","position","Left","Down","StyledTetrisWrapper","styled","div","StyledTetris","StyledMenuButton","props","gameOver","MenuButton","text","StyledStartButton","button","StartButton","onClick","memo","StyledSoundWrapper","StyledMuteButton","StyledVolumeButton","SoundButton","useState","volume","setVolume","mute","setMute","useSound","TetrisSound","play","stop","className","StyledLeaveButton","LeaveButton","useContext","history","useHistory","emit","push","Menu","score","startGame","Tetris","WIDTH","HEIGHT","start","setStart","tetriList","setTetriList","tetri","setTetri","Array","fill","row","backGrid","setBackGrid","frontGrid","setFrontGrid","HTMLgrid","setHTMLgrid","setGameOver","setScore","testCollision","newTetri","find","realPos","fillTetri","newGrid","collision","color","spectrum","tmp","getSpectrum","shift","length","prev","i","splice","removeCompletLine","style","backgroundColor","movment","on","role","tabIndex","onKeyDown","e","window","addEventListener","indexOf","keyCode","preventDefault","handlerKeydown","Game","players","setPlayers","room","setRoom","regex","exec","location","hash","error","name","Object","keys","key","Home","Room","rooms","setRooms","roomName","New_room","setName","type","placeholder","onChange","target","alert","JoinRoom","App","Provider","path","exact","component","ReactDom","render","document","getElementById"],"mappings":"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","file":"static/js/main.43942781.chunk.js","sourcesContent":["const params = {\n  server: {\n    host: 'localhost',\n    port: '3004',\n    get url(){ return ('http://' + this.host + ':' + this.port); }\n  },\n};\n\nmodule.exports = params;\n","import io from 'socket.io-client';\nimport params from '../../../params.js';\n\nconst herokuServer = 'https://red-tetris-malg.herokuapp.com/';\n\nconst socket = io(herokuServer);\n\nexport default socket;\n","import React from 'react';\nimport socket from './socket.js';\n\nconst SocketContext = React.createContext(socket);\n\nexport default SocketContext;\n","import { useRef, useEffect } from 'react';\n\nfunction useInterval(callback, delay) {\n  const savedCallback = useRef(null);\n\n  useEffect(() => {\n    savedCallback.current = callback;\n  });\n\n  useEffect(() => {\n    function tick() {\n      if (typeof savedCallback?.current !== 'undefined') {\n        savedCallback?.current();\n      }\n    }\n    if (delay !== null) {\n      const id = setInterval(tick, delay);\n\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n\nexport default useInterval;\n","function rotate(vec, center, angle) {\n  const normVec = {\n    x: vec.x - center.x,\n    y: vec.y - center.y\n  };\n  const rotVec = {\n    x: Math.round((normVec.x * Math.cos(angle) - normVec.y * Math.sin(angle)) + center.x),\n    y: Math.round((normVec.x * Math.sin(angle) + normVec.y * Math.cos(angle)) + center.y)\n  };\n  return (rotVec);\n}\n\nfunction translateX(vec, unit) {\n  return ({ x: vec.x + unit, y: vec.y });\n}\n\nfunction translateY(vec, unit) {\n  return ({ x: vec.x, y: vec.y + unit });\n}\n\nexport default { rotate, translateX, translateY };\n","import Mat2 from './Matrix.js';\n\nfunction rotate(tetriminos) {\n  const test = { ...tetriminos, points: tetriminos.points.map(value => Mat2.rotate(value, tetriminos.center, 90 * Math.PI / 180)) };\n  return (test);\n}\n\nfunction Right(tetriminos) {\n  return ({ ...tetriminos, position: Mat2.translateX(tetriminos.position, 1) });\n}\n\nfunction Left(tetriminos) {\n  return ({ ...tetriminos, position: Mat2.translateX(tetriminos.position, -1) });\n}\n\nfunction Down(tetriminos) {\n  return ({ ...tetriminos, position: Mat2.translateY(tetriminos.position, 1) });\n}\n\nexport default { rotate, Right, Left, Down };\n","import styled from 'styled-components';\n\nexport const StyledTetrisWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n`;\n\nexport const StyledTetris = styled.div`\n  display: flex;\n  align-items: flex-start;\n  padding: 40px;\n  margin: 0 auto;\n  max-width: 900px;\n  aside {\n    width: 100%;\n    max-width: 200px;\n    display: block;\n    padding: 0 20px;\n  }\n`;","import styled from 'styled-components';\n\nexport const StyledMenuButton = styled.div`\n  box-sizing: border-box;\n  display: flex;\n  align-items: center; \n  margin: 0 0 20px 0;\n  padding: 20px;\n  border: 4px solid #333;\n  min-height: 30px;\n  width: 100%;\n  border-radius: 20px;\n  color: ${props => (props.gameOver ? 'red' : '#999')};\n  background: #000;\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n  font-size: 0.8rem;\n`;","import React from 'react';\nimport { StyledMenuButton } from '../styles/StyledMenuButton';\n\nconst MenuButton = ({ gameOver, text }) => (\n    <StyledMenuButton gameOver={gameOver}>{text}</StyledMenuButton>\n);\n\nexport default MenuButton;\n","import styled from 'styled-components';\n\nexport const StyledStartButton = styled.button`\n  box-sizing: border-box;\n  margin: 0 0 20px 0;\n  padding: 20px;\n  min-height: 30px;\n  width: 100%;\n  border-radius: 20px;\n  border: none;\n  color: white;\n  background: #333;\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n  font-size: 1rem;\n  outline: none;\n  cursor: pointer;\n`;","import React from 'react';\nimport { StyledStartButton } from '../styles/StyledStartButton';\n\nconst StartButton = ({ callback }) => (\n    <StyledStartButton onClick={callback}>Start Game</StyledStartButton>\n);\n\nexport default React.memo(StartButton);\n","import styled from 'styled-components';\n\nexport const StyledSoundWrapper = styled.div`\n  display: flex;\n  overflow: auto;\n`;\n\nexport const StyledMuteButton = styled.button`\n  box-sizing: border-box;\n  margin: 0 0 0.5vw 0;\n  padding: 1vw;\n  min-height: 0.2vw;\n  width: 100%;\n  border-radius: 1vw;\n  border: none;\n  color: white;\n  background: #333;\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n  font-size: 1rem;\n  outline: none;\n  cursor: pointer;\n`;\n\nexport const StyledVolumeButton = styled.button`\n  box-sizing: border-box;\n  margin: 0 0 0.5vw 0;\n  padding: 0.5vw;\n  min-height: 0.1vw;\n  width: 100%;\n  border-radius: 1vw;\n  border: none;\n  color: white;\n  background: #333;\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n  font-size: 1rem;\n  outline: none;\n  cursor: pointer;\n`;","export default __webpack_public_path__ + \"static/media/tetris.7ffe6109.mp3\";","import React, { useState, useEffect } from \"react\";\nimport { StyledVolumeButton, StyledSoundWrapper, StyledMuteButton } from \"../styles/StyledSoundButton\";\nimport useSound from \"use-sound\";\nimport TetrisSound from \"../../audio/tetris.mp3\";\n\nconst SoundButton = () => {\n  const [volume, setVolume] = useState(0.1);\n  const [mute, setMute] = useState(false);\n  const [play, { stop }] = useSound(TetrisSound, { volume: mute ? 0 : volume });\n\n  const muteMusic = () => {\n    setMute(!mute);\n  };\n\n  const decrease = () => {\n    setVolume(volume - 0.01);\n  };\n\n  const increase = () => {\n    setVolume(volume + 0.01);\n  };\n\n  useEffect(() => {\n    play();\n    return () => {\n      stop();\n    };\n  }, [play]);\n\n  return (\n    <StyledSoundWrapper>\n      <StyledVolumeButton className=\"btn btn-danger\" onClick={decrease}>\n        -\n      </StyledVolumeButton>\n      <StyledMuteButton className=\"btn btn-danger\" onClick={muteMusic}>\n          { mute ? ( \"Unmute\") : ( \"Mute\")}\n      </StyledMuteButton>\n      <StyledVolumeButton className=\"btn btn-danger\" onClick={increase}>\n        +\n      </StyledVolumeButton>\n    </StyledSoundWrapper>\n  );\n};\n\nexport default SoundButton;\n","import styled from 'styled-components';\n\nexport const StyledLeaveButton = styled.button`\n  box-sizing: border-box;\n  margin: 0 0 20px 0;\n  padding: 20px;\n  min-height: 30px;\n  width: 100%;\n  border-radius: 20px;\n  border: none;\n  color: white;\n  background: #333;\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n  font-size: 1rem;\n  outline: none;\n  cursor: pointer;\n`;","import React, { useContext } from \"react\";\nimport SocketContext from '../../containers/context.js';\nimport { useHistory } from 'react-router-dom';\nimport { StyledLeaveButton } from \"../styles/StyledLeaveButton\";\n\nconst LeaveButton = () => {\n  const socket = useContext(SocketContext);\n  const history = useHistory();\n\n  const leave = () => {\n    socket.emit(\"leaveRoom\");\n    history.push(\"/Room\");\n  };\n\n  return (\n    <div>\n      <StyledLeaveButton className=\"btn btn-danger\" onClick={leave}>\n        Leave Room\n      </StyledLeaveButton>\n    </div>\n  );\n};\n\nexport default LeaveButton;\n","import React from \"react\";\nimport MenuButton from \"./MenuButton\";\nimport StartButton from \"./StartButton\";\nimport SoundButton from \"./SoundButton\";\nimport LeaveButton from \"./LeaveButton\";\n\nconst Menu = (props) => {\n  return (\n    <aside>\n      {props.gameOver ? (\n        <MenuButton gameOver={props.gameOver} text=\"Game Over\" />\n      ) : (\n        <div>\n          <SoundButton />\n          <MenuButton text={`Score: ${props.score}`} />\n        </div>\n      )}\n      <StartButton callback={props.startGame} />\n      <LeaveButton />\n    </aside>\n  );\n};\n\nexport default Menu;\n","import React, { useEffect, useState, useContext } from \"react\";\nimport SocketContext from \"../../../containers/context.js\";\nimport useInterval from \"./useInterval.js\";\nimport movment from \"./movments.js\";\nimport \"./Tetris.css\";\nimport { StyledTetrisWrapper, StyledTetris } from \"../../styles/StyledTetris\";\nimport Menu from \"../../Menu/Menu\";\n\nconst Tetris = () => {\n  const socket = useContext(SocketContext);\n  const WIDTH = 10;\n  const HEIGHT = 20;\n  const [start, setStart] = useState(false);\n  const [tetriList, setTetriList] = useState([]);\n  const [tetri, setTetri] = useState({});\n  const [backGrid, setBackGrid] = useState(\n    new Array(HEIGHT).fill().map((row) => new Array(WIDTH).fill(\"white\"))\n  );\n  const [frontGrid, setFrontGrid] = useState(\n    new Array(HEIGHT).fill().map((row) => new Array(WIDTH).fill(0))\n  );\n  const [HTMLgrid, setHTMLgrid] = useState([]);\n  const [gameOver, setGameOver] = useState(false);\n  const [score, setScore] = useState(0);\n\n  const testCollision = (newTetri) => {\n    let result = newTetri.points.find((value) => {\n      const realPos = {\n        x: newTetri.position.x + value.x,\n        y: newTetri.position.y + value.y,\n      };\n      return (\n        realPos.x < 0 ||\n        realPos.x >= WIDTH ||\n        realPos.y < 0 ||\n        realPos.y >= HEIGHT ||\n        backGrid[realPos.y][realPos.x] !== \"white\"\n      );\n    });\n    return result ? true : false;\n  };\n\n  const fillTetri = (newTetri) => {\n    let newGrid = frontGrid.map((row) => row.map((value) => 0));\n    setTetri(newTetri);\n    newTetri.points.map((value) => {\n      newGrid[newTetri.position.y + value.y][newTetri.position.x + value.x] = 1;\n    });\n    setFrontGrid([...newGrid]);\n    };\n\n  const removeCompletLine = () => {\n    let newGrid = [...backGrid];\n    let score = 0;\n    backGrid.map((row, i) => {\n      if (!row.find(value => (value === \"white\" || value === \"grey\"))) {\n        score += 100;\n        newGrid.splice(i, 1);\n        newGrid.splice(0, 0, new Array(WIDTH).fill(\"white\"));\n        socket.emit('sendBlackbar');\n      }\n    });\n    setScore(prev => prev + (score === 400 ? score * 2 : score));\n    setBackGrid(newGrid);\n  };\n\n  const getSpectrum = () => {\n    let spectrum = [];\n    for (let x = 0 ; x < WIDTH ; ++x) {\n      let tmp = 0;\n      for (let y = 0 ; y < HEIGHT ; ++y) {\n        if (backGrid[y][x] === 'white') {\n          ++tmp;\n        }\n      }\n      spectrum.push(tmp);\n    }\n    return (spectrum);\n  };\n\n  const collision = () => {\n    let newGrid = [...backGrid];\n    tetri.points.map((value) => {\n      newGrid[tetri.position.y + value.y][tetri.position.x + value.x] =\n        tetri.color;\n    });\n    socket.emit('updateSpectrum', getSpectrum());\n    setBackGrid([...newGrid]);\n    const newTetri = tetriList.shift();\n    if (tetriList.length < 3) {\n      socket.emit('getTetris', tetriminos => {\n        setTetriList(prev => [...prev, tetriminos]);\n      });\n    }\n    if (!testCollision(newTetri)) {\n      removeCompletLine();\n      fillTetri(newTetri);\n    } else {\n      setGameOver(true);\n      setStart(false);\n    }\n  };\n\n  const handlerKeydown = (e) => {\n    if (e.keyCode === 37) {\n      if (!testCollision(movment.Left(tetri))) {\n        fillTetri(movment.Left(tetri));\n      }\n    } else if (e.keyCode === 39) {\n      if (!testCollision(movment.Right(tetri))) {\n        fillTetri(movment.Right(tetri));\n      }\n    } else if (e.keyCode === 38) {\n      if (!testCollision(movment.rotate(tetri))) {\n        fillTetri(movment.rotate(tetri));\n      }\n    } else if (e.keyCode === 40) {\n      if (!testCollision(movment.Down(tetri))) {\n        setScore(prev => prev + 1);\n        fillTetri(movment.Down(tetri));\n      } else {\n        collision();\n      }\n    }\n  };\n\n  useEffect(() => {\n    let HTMLgrid = [];\n\n    for (let y = 0; y < HEIGHT; ++y) {\n      let row = [];\n      for (let x = 0; x < WIDTH; ++x) {\n        row.push(\n          <td\n            style={{\n              backgroundColor: frontGrid[y][x] ? tetri.color : backGrid[y][x],\n            }}\n            key={`${y * WIDTH + x}`}\n          ></td>\n        );\n      }\n      HTMLgrid.push(<tr key={`${y}`}>{row}</tr>);\n    }\n    setHTMLgrid(HTMLgrid);\n  }, [frontGrid]);\n\n  useInterval(() => {\n    if (!gameOver && start) {\n      if (!testCollision(movment.Down(tetri))) {\n        fillTetri(movment.Down(tetri));\n      } else {\n        collision();\n      }\n    }\n  }, 1000);\n\n  useEffect(() => {\n    socket.on('getBlackbar', () => {\n      setBackGrid(prev => {\n        prev.splice(HEIGHT, 0, new Array(WIDTH).fill(\"grey\"));\n        prev.splice(0, 1);\n        return (prev);\n      });\n    });\n  }, []);\n\n  useEffect(() => {\n    socket.on('newTetris', tetriminos => {\n      setTetriList(prev => [...prev, tetriminos]);\n    });\n  }, []);\n\n  useEffect(() => {\n    socket.on('getSetTetris', tetriminos => {\n      // Reset everything\n      const newTetri = tetriminos.shift();\n      let newGrid = [...backGrid];\n      setStart(true);\n      newGrid = newGrid.map((row) => row.map((value) => \"white\"));\n      setBackGrid(newGrid);\n      setTetriList([...tetriminos]);\n      setTetri(newTetri);\n      fillTetri(newTetri);\n      setGameOver(false);\n      setScore(0);\n    });\n  }, []);\n\n  const startGame = () => {\n    socket.emit('start');\n  };\n\n  return (\n    <StyledTetrisWrapper\n      role=\"button\"\n      tabIndex=\"0\"\n      onKeyDown={(e) => {\n        window.addEventListener('keydown', (e) => {\n          if ([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {\n            e.preventDefault();\n          }\n        }, false);\n        handlerKeydown(e);\n      }}\n    >\n      <StyledTetris>\n        <table>\n          <tbody>{HTMLgrid}</tbody>\n        </table>\n        <Menu gameOver={gameOver} startGame={startGame} score={score} />\n      </StyledTetris>\n    </StyledTetrisWrapper>\n  );\n};\n\nexport default Tetris;\n","import React, { useContext, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport SocketContext from '../../containers/context.js';\nimport Tetris from './Tetris/Tetris.js';\n\nconst Game = () => {\n  const socket = useContext(SocketContext);\n  const [players, setPlayers] = useState({});\n  const [room, setRoom] = useState({});\n  const history = useHistory();\n  const regex = /#([a-zA-Z]+)\\[([a-zA-Z]+)\\]/;\n\n  useEffect(() => {\n    const urlParams = regex.exec(location.hash);\n\n    if (!urlParams) {\n      history.push('/Home');\n    } else {\n      socket.emit('getMyRoom', (error, room) => {\n        if (error) {\n          history.push('/Home');\n        } else {\n          setRoom(room);\n          setPlayers(room.players);\n        }\n      });\n    }\n  }, [socket]);\n\n  useEffect(() => {\n    socket.on('updatePlayers', (players) => {\n      setPlayers(players);\n    });\n  }, [players, socket]);\n\n  return (\n    <div className='container'>\n      <h1>{room.name}</h1>\n      {\n        Object.keys(players).map((key, i) => <p key={i}>{players[key].name}</p>)\n      }\n      <Tetris />\n    </div>\n  );\n};\n\nexport default Game;\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\n\nconst Home = () => {\n  const history = useHistory();\n\n  const play = () => {\n    history.push('/Room');\n  };\n\n  return (\n    <div className='container'>\n      <h1>Bienvenue sur Red Tetris</h1>\n      <button className='btn btn-danger' onClick={play}>Play</button>\n    </div>\n  );\n};\n\nexport default Home;\n","import React, { useContext, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport SocketContext from '../../containers/context.js';\nimport './Room.css';\n\nconst Room = () => {\n  const socket = useContext(SocketContext);\n  const history = useHistory();\n  const [rooms, setRooms] = useState({});\n\n  const create_room = () => {\n    history.push('/New-room');\n  };\n\n  const joinRoom = (roomName) => {\n    history.push(`/Join-room#${roomName}`);\n  };\n\n  useEffect(() => {\n    socket.emit('getRooms', (rooms) => {\n      setRooms(rooms);\n    });\n  }, [socket]);\n\n  useEffect(() => {\n    socket.on('updateRooms', (rooms) => {\n      setRooms(rooms);\n    });\n  }, [rooms]);\n\n  return (\n    <div className='container'>\n      <h1>Room list</h1>\n      <div className='list-group mb-3'>\n      {\n        Object.keys(rooms).map((key, i) => {\n          return (\n            <li className='list-group-item p-1' key={i}>\n              <label><b>{rooms[key].name}</b> <b>({Object.keys(rooms[key].players).length})</b></label>\n              <button className='btn btn-danger float-right' onClick={() => joinRoom(rooms[key].name)}>Join</button>\n            </li>\n          );\n        })\n      }\n      </div>\n      <button className='btn btn-danger' onClick={create_room}>Create New Room</button>\n    </div>\n  );\n};\n\nexport default Room;\n","import React, { useContext, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport SocketContext from '../../containers/context.js';\n\nconst New_room = () => {\n  const socket = useContext(SocketContext);\n  const history = useHistory();\n  const [name, setName] = useState('');\n  const [room, setRoom] = useState('');\n\n  const handleNameChange = (e) => {\n    setName(e.target.value);\n  };\n\n  const handleRoomChange = (e) => {\n    setRoom(e.target.value);\n  };\n\n  const create = (e) => {\n    e.preventDefault();\n    if (name && room) {\n      socket.emit('join', name);\n      socket.emit('addRoom', room, (error) => {\n        if (!error) {\n          history.push(`/#${room}[${name}]`);\n        } else {\n          alert('Room name already exist');\n        }\n      });\n    }\n  };\n\n  return (\n    <div className='container'>\n      <h1>New Room Creation</h1>\n      <form>\n        <div className='form-group'>\n          <input className='form-control' type='text' placeholder='Username' onChange={handleNameChange} />\n        </div>\n        <div className='form-group'>\n          <input className='form-control' type='text' placeholder='Room name' onChange={handleRoomChange}/>\n        </div>\n        <input className='btn btn-danger' type='submit' value='Create' onClick={create} />\n      </form>\n    </div>\n  );\n};\n\nexport default New_room;\n","import React, { useContext, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport SocketContext from '../../containers/context.js';\n\nconst JoinRoom = () => {\n  const socket = useContext(SocketContext);\n  const [name, setName] = useState('');\n  const [room, setRoom] = useState('');\n  const history = useHistory();\n  const regex = /#([a-zA-Z]+)/;\n\n  useEffect(() => {\n    // eslint-disable-next-line no-restricted-globals\n    setRoom(regex.exec(location.hash)[1]);\n    // eslint-disable-next-line no-restricted-globals\n  }, [location.hash]);\n\n  const handleChange = (e) => {\n    setName(e.target.value);\n  };\n\n  const join = (e) => {\n    e.preventDefault();\n    if (name) {\n      socket.emit('join', name);\n      socket.emit('joinRoom', room, (error) => {\n        if (!error) {\n          history.push(`/#${room}[${name}]`);\n        } else {\n          alert('Username already taken');\n        }\n      });\n    }\n  };\n\n  return (\n    <div className='container'>\n      <h1>Join \"{room}\"</h1>\n      <form>\n        <div className='form-group'>\n          <input className='form-control' placeholder='Username' onChange={handleChange} />\n        </div>\n        <input className='btn btn-danger' type='submit' value='Join' onClick={join} />\n      </form>\n    </div>\n  );\n};\n\nexport default JoinRoom;\n","import React from 'react';\nimport { BrowserRouter as Routes, Route } from 'react-router-dom';\nimport socket from './socket.js';\nimport SocketContext from './context.js';\nimport Game from '../components/Game/Game.js';\nimport Home from '../components/Home/Home.js';\nimport Room from '../components/Room/Room.js';\nimport New_room from '../components/New_room/New_room.js';\nimport JoinRoom from '../components/Join_room/Join_room.js';\nimport './App.css';\n\nconst App = () => {\n  return (\n    <SocketContext.Provider value={socket}>\n      <Routes>\n        <Route path='/' exact component={Game} />\n        <Route path='/Home' component={Home} />\n        <Route path='/Room' component={Room} />\n        <Route path='/New-room' component={New_room} />\n        <Route path='/Join-room' component={JoinRoom} />\n      </Routes>\n    </SocketContext.Provider>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDom from 'react-dom';\nimport App from './containers/App.js';\n\nReactDom.render(<App />, document.getElementById('tetris'));\n"],"sourceRoot":""}